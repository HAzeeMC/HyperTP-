name: PR Validation

on:
  pull_request:
    branches: [ main, master ]

jobs:
  validate:
    name: Validate Pull Request
    runs-on: ubuntu-latest

    steps:
    - name: Checkout PR
      uses: actions/checkout@v4

    - name: Set up JDK 21
      uses: actions/setup-java@v4
      with:
        java-version: '21'
        distribution: 'temurin'

    - name: Build validation
      run: |
        echo "🏗️ Validating build..."
        mvn -B clean compile
        echo "✅ Build validation passed"

    - name: Test validation
      run: |
        echo "🧪 Running tests..."
        mvn -B test
        echo "✅ Test validation passed"

    - name: PR Validation Summary
      run: |
        echo "✅ PR Validation Summary" >> $GITHUB_STEP_SUMMARY
        echo "=======================" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "**Build**: ✅ Passed" >> $GITHUB_STEP_SUMMARY
        echo "**Tests**: ✅ Passed" >> $GITHUB_STEP_SUMMARY
        echo "**Java**: ✅ JDK 21" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "This pull request is ready for review! 🚀" >> $GITHUB_STEP_SUMMARY
